{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1a8695b5e24d05dbcf12","webpack:///external \"ramda\"","webpack:///./src/util.js","webpack:///./src/message.ts","webpack:///external \"react\"","webpack:///./node_modules/deep-freeze-strict/index.js"],"names":["merge","left","right","Array","update","compareOffsets","a","b","getValidationFailures","spec","isFunctionWithNumArgs","Function","numArgs","isObjectAndAllValuesAreFunctions","Object","assertValid","fnMap","component","failures","TypeError","join","withProps","props","fn","cloneRecursive","children","newProps","map","child","mapProps","hasChildren","mapper","isValidElement","cloneElement","clone","suppressEvent","e","preventDefault","log","msg","val","console","trap","handler","args","toArray","of","mergeMap","first","second","Map","mergeMaps","safeStringify","JSON","stringify","safeParse","parse","undefined","isMessage","prototype","isEmittable","toEmittable","type","constructMessage","msgType","data","extra"],"mappings":"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","file":"message.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ramda\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"ramda\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"architecture\"] = factory(require(\"ramda\"), require(\"react\"));\n\telse\n\t\troot[\"architecture\"] = factory(root[\"ramda\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a8695b5e24d05dbcf12","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 0\n// module chunks = 0 1 2 3","import {\n  pipe, curry, evolve, is, pickAll, keys, all, merge as _merge, values, both, propEq,\n  ifElse, identity, reduce, mergeDeepWith, union, map, flip, filter, not, isEmpty, nth,\n  zipWith, equals, either as or, both as and\n} from 'ramda';\nimport React, { Children } from 'react';\nimport Message from './message';\n\n/**\n * Deep-merges two objects, overwriting left-hand keys with right-hand keys, unionizing arrays.\n *\n * @param  {Object} left\n * @param  {Object} right\n * @return {Object}\n */\nexport const merge = mergeDeepWith((left, right) => (\n  all(is(Array), [left, right]) ? union(left, right) : right\n));\n\n/**\n * Convenience function for handlers that only update state with fixed values,\n * i.e. `[FooMessage, state => merge(state, { bar: true })]` becomes\n * `[FooMessage, update({ bar: true })]`\n */\nexport const update = flip(_merge);\n\n/**\n * Returns the count of offsets that are equal between two arrays. Useful for determining\n * if one array is the prefix of another, i.e.:\n *\n * ```\n * compareOffsets([1,2,3], [1,2,3,4,5]) -> true\n * compareOffsets([1,2,3,5], [1,2,3,4,5]) -> false\n * ```\n *\n * @param  {Array} a 'Prefix' array\n * @param  {Array} b Array to compare against\n * @return {Boolean} Returns true if `a` is the prefix of `b`.\n */\nexport const compareOffsets = curry((a, b) => all(equals(true), zipWith(equals, a, b)));\n\n/**\n * Accepts a validator object where the values are functions that return boolean, and\n * returns a function that accepts an object to check against the validator.\n *\n * @example\n * ```\n * getValidationFailures({ foo: is(String), bar: is(Function) })\n *   ({ foo: \"Hello\", bar: \"not Func\" }) -> [\"bar\"]\n * ```\n */\nexport const getValidationFailures = spec => pipe(\n  pickAll(keys(spec)),\n  evolve(spec),\n  filter(not),\n  keys\n);\n\nconst isFunctionWithNumArgs = numArgs => both(is(Function), propEq('length', numArgs));\n\nconst isObjectAndAllValuesAreFunctions = both(\n  is(Object),\n  pipe(values, all(is(Function)))\n);\n\nconst assertValid = (fnMap, component) => {\n  const spec = { fnMap: isObjectAndAllValuesAreFunctions, component: isFunctionWithNumArgs(1) };\n  const failures = getValidationFailures(spec)({ fnMap, component });\n\n  if (!isEmpty(failures)) {\n    throw new TypeError('withProps failed on types: ' + failures.join(', '));\n  }\n};\n\n/**\n * Accepts an object of key/function pairs and a pure component function, and returns\n * a new pure component that will generate and inject new props into the pass component\n * function.\n * @param  {Object<Function>} An object hash of functions used to generate new props\n * @param  {Component} A pure function that returns React DOM\n * @params {Object} Accepts props passed from parent\n * @return {Component} Returns a new component that generates new props from passed props\n *\n * @example\n * ```\n * const FullName = (props) => (<span>{props.fullName}</span>);\n *\n * const Name = withProps(\n *   {\n *     fullName: (props) => `${props.first} ${props.last}`\n *   },\n *   FullName\n * );\n *\n * <Name first=\"Bob\" last=\"Loblaw\" />\n * ```\n */\nexport const withProps = curry((fnMap, component, props) => {\n  assertValid(fnMap, component, props);\n  return component(merge(props, map(fn => fn(props), fnMap)));\n});\n\nexport const cloneRecursive = (children, newProps) => Children.map(children, (child) => {\n  const mapProps = (child) => {\n    const props = is(Function, newProps) ? newProps(child) : newProps;\n    const hasChildren = child.props && child.props.children;\n    const mapper = hasChildren && is(Array, child.props.children) ? identity : nth(0);\n    const children = hasChildren ? mapper(cloneRecursive(child.props.children, newProps)) : null;\n    return merge(props || {}, { children });\n  };\n\n  return React.isValidElement(child) ? React.cloneElement(child, mapProps(child)) : child;\n});\n\nexport const clone = (children, newProps) => Children.map(children, child => (\n  React.cloneElement(child, merge(React.isValidElement(child) ? newProps : {}, {\n    children: child.props.children,\n  }))\n));\n\nexport const suppressEvent = (e) => {\n  e.preventDefault();\n  return e;\n};\n\n/**\n * Logs a value with a message and returns the value. Good for inspecting complex\n * function pipelines.\n */\nexport const log = curry((msg, val) => {\n  console.log(msg, val); // eslint-disable-line no-console\n  return val;\n});\n\n/**\n * Provides a functional interface for catching and handling errors.\n *\n * @param  {Function} handler A handler function to call when an error is thrown.\n * @param  {Function} fn A function to trap errors on.\n * @return {Function} Returns a function that, when called, passes its arguments to the\n *                    wrapped function. If the call succeeds, the it returns the result\n *                    of calling the wrapped function, otherwise returns the result of\n *                    passing the error (along with the arguments) to the handler.\n */\nexport const trap = curry((handler, fn) => (\n  (...args) => {\n    try {\n      return fn(...args);\n    } catch (e) {\n      return handler(e, ...args);\n    }\n  }\n));\n\n/**\n * Converts a value to an array... unless it's already an array, then it just returns it.\n * @type {[type]}\n */\nexport const toArray = ifElse(is(Array), identity, Array.of);\n\n/**\n * Helper functions for reducing effect Maps into a single Map.\n */\nexport const mergeMap = (first, second) => new Map([...first, ...second]);\nexport const mergeMaps = reduce(mergeMap, new Map([]));\n\n/**\n * Safely stringifies a JavaScript value to prevent error-ception in `app.result()`.\n */\nexport const safeStringify = (val) => {\n  try {\n    return JSON.stringify(val);\n  } catch (e) {\n    return '{ unrepresentable value }';\n  }\n};\n\n/**\n * Safely parses a JavaScript value to prevent error-ception.\n */\nexport const safeParse = (val) => {\n  try {\n    return JSON.parse(val);\n  } catch (e) {\n    return undefined;\n  }\n};\n\n/**\n * Checks that a value is a message constructor.\n */\nexport const isMessage = val => val && val.prototype && val.prototype instanceof Message;\n\n/**\n * Checks that a value is emittable as a message constructor\n */\nexport const isEmittable = or(isMessage, and(is(Array), pipe(nth(0), isMessage)));\n\nexport const toEmittable = ifElse(is(Array), identity, type => [type, {}]);\n\n/**\n * Maps an emittable and message data to a message.\n */\nexport const constructMessage = curry((msgType, data) => {\n  const [type, extra] = toEmittable(msgType);\n  return new type(merge(data, extra));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import deepFreeze from 'deep-freeze-strict';\nimport { is, isEmpty, join, merge } from 'ramda';\nimport { getValidationFailures, safeStringify } from './util';\n\ntype MessageOptions = {\n  shallow?: boolean;\n};\n\nexport default class Message {\n\n  protected static defaults: object = {};\n  protected static expects: object = {};\n\n  public data: object;\n\n  constructor(data: object = {}, opts: MessageOptions = {}) {\n    const ctor = this.constructor as any;\n    this.check(data);\n    this.data = merge(ctor.defaults, data);\n\n    const invalidTypes = getValidationFailures(ctor.expects)(this.data);\n\n    if (!isEmpty(invalidTypes)) {\n      const msgData = safeStringify(data), types = join(', ', invalidTypes);\n      throw new TypeError(`Message data ${msgData} failed expectations in ${ctor.name}: ${types}`);\n    }\n\n    if (opts && opts.shallow) {\n      Object.freeze(this);\n      Object.freeze(this.data);\n    } else {\n      deepFreeze(this);\n    }\n  }\n\n  private check(data) {\n    if (is(Object, data)) {\n      return;\n    }\n    throw new Error([\n      'Message data must be an object in message',\n      this.constructor.name,\n      'but is',\n      safeStringify(data),\n    ].join(' '));\n  }\n\n  public map(data): Message {\n    return new (this.constructor as any)(merge(this.data, data));\n  }\n}\n\nexport class Activate extends Message {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/message.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 4\n// module chunks = 0 1 2 3","module.exports = function deepFreeze (o) {\n  Object.freeze(o);\n\n  var oIsFunction = typeof o === \"function\";\n  var hasOwnProp = Object.prototype.hasOwnProperty;\n\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (hasOwnProp.call(o, prop)\n    && (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true )\n    && o[prop] !== null\n    && (typeof o[prop] === \"object\" || typeof o[prop] === \"function\")\n    && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  \n  return o;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-freeze-strict/index.js\n// module id = 5\n// module chunks = 0 1 2 3"],"sourceRoot":""}